{"numFailedTestSuites":10,"numFailedTests":26,"numPassedTestSuites":13,"numPassedTests":77,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":3,"numTodoTests":0,"numTotalTestSuites":23,"numTotalTests":103,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1750990144205,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["🧪 crearClienteController"],"duration":39,"failureDetails":[{"matcherResult":{"actual":500,"expected":201,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m201\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m201\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at Object.toBe (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\clientes\\crearClienteController.test.js:31:34)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 crearClienteController ✅ Crea un cliente correctamente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"✅ Crea un cliente correctamente"},{"ancestorTitles":["🧪 crearClienteController"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteController ❌ Error si falta nombre, dni o teléfono","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"❌ Error si falta nombre, dni o teléfono"},{"ancestorTitles":["🧪 crearClienteController"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteController ❌ Error si el DNI ya existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ Error si el DNI ya existe"},{"ancestorTitles":["🧪 crearClienteController"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteController ❌ Error si el correo tiene formato inválido","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ Error si el correo tiene formato inválido"},{"ancestorTitles":["🧪 crearClienteController"],"duration":3,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatch\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected pattern: \u001b[32m/observaciones contienen contenido no permitido/i\u001b[39m\nReceived string:  \u001b[31m\"El campo observaciones contiene caracteres no permitidos\"\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatch\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected pattern: \u001b[32m/observaciones contienen contenido no permitido/i\u001b[39m\nReceived string:  \u001b[31m\"El campo observaciones contiene caracteres no permitidos\"\u001b[39m\n    at Object.toMatch (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\clientes\\crearClienteController.test.js:113:26)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 crearClienteController ❌ Error si las observaciones contienen XSS","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"❌ Error si las observaciones contienen XSS"},{"ancestorTitles":["🧪 crearClienteController"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteController ❌ Error interno del servicio","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ Error interno del servicio"}],"endTime":1750990146105,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 crearClienteController › ✅ Crea un cliente correctamente\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m201\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 29 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 30 |\u001b[39m     \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39m_getJSONData()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 31 |\u001b[39m     expect(res\u001b[33m.\u001b[39m_getStatusCode())\u001b[33m.\u001b[39mtoBe(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 32 |\u001b[39m     expect(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 33 |\u001b[39m     expect(data\u001b[33m.\u001b[39mmensaje)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cliente creado correctamente'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 34 |\u001b[39m     expect(data\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mcliente)\u001b[33m.\u001b[39mtoEqual({ nombre\u001b[33m:\u001b[39m \u001b[32m'Juan'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/unit/controllers/clientes/crearClienteController.test.js\u001b[39m\u001b[0m\u001b[2m:31:34)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 crearClienteController › ❌ Error si las observaciones contienen XSS\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatch\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected pattern: \u001b[32m/observaciones contienen contenido no permitido/i\u001b[39m\n    Received string:  \u001b[31m\"El campo observaciones contiene caracteres no permitidos\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 111 |\u001b[39m     \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39m_getJSONData()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 112 |\u001b[39m     expect(res\u001b[33m.\u001b[39m_getStatusCode())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 113 |\u001b[39m     expect(data\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoMatch(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 114 |\u001b[39m       \u001b[35m/observaciones contienen contenido no permitido/i\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 115 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 116 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toMatch (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/unit/controllers/clientes/crearClienteController.test.js\u001b[39m\u001b[0m\u001b[2m:113:26)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\clientes\\crearClienteController.test.js","startTime":1750990144421,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["🧪 Calificar Cliente - Integración"],"duration":44,"failureDetails":[{}],"failureMessages":["TypeError: crearClienteYOrdenes is not a function\n    at Object.crearClienteYOrdenes (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificarClienteService.test.js:23:27)\n    at Promise.then.completed (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"🧪 Calificar Cliente - Integración ✅ Cliente con 6 órdenes reparadas debe ser \"muy_bueno\"","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"✅ Cliente con 6 órdenes reparadas debe ser \"muy_bueno\""},{"ancestorTitles":["🧪 Calificar Cliente - Integración"],"duration":7,"failureDetails":[{}],"failureMessages":["TypeError: crearClienteYOrdenes is not a function\n    at Object.crearClienteYOrdenes (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificarClienteService.test.js:38:27)\n    at Promise.then.completed (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"🧪 Calificar Cliente - Integración 🚫 Cliente baneado debe recibir \"muy_malo\" y estado \"suspendido\"","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🚫 Cliente baneado debe recibir \"muy_malo\" y estado \"suspendido\""},{"ancestorTitles":["🧪 Calificar Cliente - Integración"],"duration":6,"failureDetails":[{}],"failureMessages":["TypeError: crearClienteYOrdenes is not a function\n    at Object.crearClienteYOrdenes (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificarClienteService.test.js:53:27)\n    at Promise.then.completed (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"🧪 Calificar Cliente - Integración 😠 Cliente con 2 observaciones negativas debe ser \"muy_malo\"","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"😠 Cliente con 2 observaciones negativas debe ser \"muy_malo\""},{"ancestorTitles":["🧪 Calificar Cliente - Integración"],"duration":5,"failureDetails":[{}],"failureMessages":["TypeError: crearClienteYOrdenes is not a function\n    at Object.crearClienteYOrdenes (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificarClienteService.test.js:68:27)\n    at Promise.then.completed (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"🧪 Calificar Cliente - Integración 🥇 Cliente frecuente con calificación base \"regular\" sube a \"bueno\"","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🥇 Cliente frecuente con calificación base \"regular\" sube a \"bueno\""},{"ancestorTitles":["🧪 Calificar Cliente - Integración"],"duration":32,"failureDetails":[{"matcherResult":{"expected":false,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m\n    at Object.toBe (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificarClienteService.test.js:88:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 Calificar Cliente - Integración 🔍 Cliente inexistente debe lanzar 404","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"🔍 Cliente inexistente debe lanzar 404"}],"endTime":1750990146431,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Calificar Cliente - Integración › ✅ Cliente con 6 órdenes reparadas debe ser \"muy_bueno\"\u001b[39m\u001b[22m\n\n    TypeError: crearClienteYOrdenes is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 21 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   it(\u001b[32m'✅ Cliente con 6 órdenes reparadas debe ser \"muy_bueno\"'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 23 |\u001b[39m     \u001b[36mconst\u001b[39m cliente \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m crearClienteYOrdenes({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m       numOrdenes\u001b[33m:\u001b[39m \u001b[35m6\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m       reparadas\u001b[33m:\u001b[39m \u001b[35m6\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.crearClienteYOrdenes (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/calificarClienteService.test.js\u001b[39m\u001b[0m\u001b[2m:23:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Calificar Cliente - Integración › 🚫 Cliente baneado debe recibir \"muy_malo\" y estado \"suspendido\"\u001b[39m\u001b[22m\n\n    TypeError: crearClienteYOrdenes is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 36 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 37 |\u001b[39m   it(\u001b[32m'🚫 Cliente baneado debe recibir \"muy_malo\" y estado \"suspendido\"'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 38 |\u001b[39m     \u001b[36mconst\u001b[39m cliente \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m crearClienteYOrdenes({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m       estadoCliente\u001b[33m:\u001b[39m \u001b[32m'baneado'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m       numOrdenes\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.crearClienteYOrdenes (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/calificarClienteService.test.js\u001b[39m\u001b[0m\u001b[2m:38:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Calificar Cliente - Integración › 😠 Cliente con 2 observaciones negativas debe ser \"muy_malo\"\u001b[39m\u001b[22m\n\n    TypeError: crearClienteYOrdenes is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 52 |\u001b[39m   it(\u001b[32m'😠 Cliente con 2 observaciones negativas debe ser \"muy_malo\"'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mconst\u001b[39m cliente \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m crearClienteYOrdenes({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 54 |\u001b[39m       numOrdenes\u001b[33m:\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 55 |\u001b[39m       reparadas\u001b[33m:\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 56 |\u001b[39m       observacionesNegativas\u001b[33m:\u001b[39m \u001b[35m2\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.crearClienteYOrdenes (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/calificarClienteService.test.js\u001b[39m\u001b[0m\u001b[2m:53:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Calificar Cliente - Integración › 🥇 Cliente frecuente con calificación base \"regular\" sube a \"bueno\"\u001b[39m\u001b[22m\n\n    TypeError: crearClienteYOrdenes is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 66 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 67 |\u001b[39m   it(\u001b[32m'🥇 Cliente frecuente con calificación base \"regular\" sube a \"bueno\"'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 68 |\u001b[39m     \u001b[36mconst\u001b[39m cliente \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m crearClienteYOrdenes({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m       numOrdenes\u001b[33m:\u001b[39m \u001b[35m4\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 70 |\u001b[39m       reparadas\u001b[33m:\u001b[39m \u001b[35m2\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m       observaciones\u001b[33m:\u001b[39m \u001b[32m'cliente frecuente'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.crearClienteYOrdenes (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/calificarClienteService.test.js\u001b[39m\u001b[0m\u001b[2m:68:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Calificar Cliente - Integración › 🔍 Cliente inexistente debe lanzar 404\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mfalse\u001b[39m\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 86 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 88 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmensaje)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/no encontrado/i\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 90 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 91 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/calificarClienteService.test.js\u001b[39m\u001b[0m\u001b[2m:88:30)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificarClienteService.test.js","startTime":1750990144418,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["🧪 Integración: Estado de cliente"],"duration":67,"failureDetails":[],"failureMessages":[],"fullName":"🧪 Integración: Estado de cliente 🧪 debería responder 404 si la ruta no existe","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"🧪 debería responder 404 si la ruta no existe"},{"ancestorTitles":["🧪 Integración: Estado de cliente"],"duration":26,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.toBe (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\estadoCliente.int.test.js:44:24)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 Integración: Estado de cliente 🔸 debería suspender correctamente a un cliente activo","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🔸 debería suspender correctamente a un cliente activo"},{"ancestorTitles":["🧪 Integración: Estado de cliente"],"duration":10,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.toBe (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\estadoCliente.int.test.js:67:24)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 Integración: Estado de cliente 🔸 debería reactivar un cliente suspendido","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🔸 debería reactivar un cliente suspendido"},{"ancestorTitles":["🧪 Integración: Estado de cliente"],"duration":9,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.toBe (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\estadoCliente.int.test.js:90:24)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 Integración: Estado de cliente 🔸 debería dar de baja definitivamente a un cliente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🔸 debería dar de baja definitivamente a un cliente"}],"endTime":1750990146442,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Integración: Estado de cliente › 🔸 debería suspender correctamente a un cliente activo\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 42 |\u001b[39m     console\u001b[33m.\u001b[39mlog(\u001b[32m'🔍 BODY:'\u001b[39m\u001b[33m,\u001b[39m res\u001b[33m.\u001b[39mbody)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 43 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 44 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 45 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmensaje)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cliente suspendido correctamente'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 47 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mcliente\u001b[33m.\u001b[39mestado)\u001b[33m.\u001b[39mtoBe(\u001b[32m'suspendido'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/estadoCliente.int.test.js\u001b[39m\u001b[0m\u001b[2m:44:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Integración: Estado de cliente › 🔸 debería reactivar un cliente suspendido\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 65 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 66 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 67 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 68 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmensaje)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Cliente reactivado correctamente'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 70 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mcliente\u001b[33m.\u001b[39mestado)\u001b[33m.\u001b[39mtoBe(\u001b[32m'activo'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/estadoCliente.int.test.js\u001b[39m\u001b[0m\u001b[2m:67:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Integración: Estado de cliente › 🔸 debería dar de baja definitivamente a un cliente\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 88 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 90 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 91 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 92 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmensaje)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Baja definitiva confirmada correctamente'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 93 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdetails\u001b[33m.\u001b[39mcliente\u001b[33m.\u001b[39mestado)\u001b[33m.\u001b[39mtoBe(\u001b[32m'baneado'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/estadoCliente.int.test.js\u001b[39m\u001b[0m\u001b[2m:90:24)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\estadoCliente.int.test.js","startTime":1750990144418,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["🧪 estadoClienteController (unitario)","🔸 suspender"],"duration":9,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Cliente suspendido correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Cliente suspendido correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.toHaveBeenCalledWith (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\clientes\\estadoClienteService.unit.test.js:36:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 estadoClienteController (unitario) 🔸 suspender debería suspender al cliente correctamente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"debería suspender al cliente correctamente"},{"ancestorTitles":["🧪 estadoClienteController (unitario)","🔸 suspender"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 estadoClienteController (unitario) 🔸 suspender debería retornar que ya está suspendido","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería retornar que ya está suspendido"},{"ancestorTitles":["🧪 estadoClienteController (unitario)","🔸 suspender"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧪 estadoClienteController (unitario) 🔸 suspender debería retornar error si ID es inválido","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería retornar error si ID es inválido"},{"ancestorTitles":["🧪 estadoClienteController (unitario)","🔸 suspender"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧪 estadoClienteController (unitario) 🔸 suspender debería manejar errores del servicio","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería manejar errores del servicio"},{"ancestorTitles":["🧪 estadoClienteController (unitario)","🔸 reactivar"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Cliente reactivado correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Cliente reactivado correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.toHaveBeenCalledWith (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\clientes\\estadoClienteService.unit.test.js:83:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 estadoClienteController (unitario) 🔸 reactivar debería reactivar al cliente correctamente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"debería reactivar al cliente correctamente"},{"ancestorTitles":["🧪 estadoClienteController (unitario)","🔸 reactivar"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 estadoClienteController (unitario) 🔸 reactivar debería retornar que ya está activo","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería retornar que ya está activo"},{"ancestorTitles":["🧪 estadoClienteController (unitario)","🔸 confirmarBaja"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Baja definitiva confirmada correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Baja definitiva confirmada correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.toHaveBeenCalledWith (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\clientes\\estadoClienteService.unit.test.js:117:27)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 estadoClienteController (unitario) 🔸 confirmarBaja debería dar de baja al cliente correctamente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"debería dar de baja al cliente correctamente"},{"ancestorTitles":["🧪 estadoClienteController (unitario)","🔸 confirmarBaja"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"🧪 estadoClienteController (unitario) 🔸 confirmarBaja debería retornar que ya fue baneado","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería retornar que ya fue baneado"}],"endTime":1750990146562,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 estadoClienteController (unitario) › 🔸 suspender › debería suspender al cliente correctamente\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Cliente suspendido correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 34 |\u001b[39m       \u001b[36mawait\u001b[39m estadoClienteController\u001b[33m.\u001b[39msuspender(mockReq(idValido)\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 35 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 36 |\u001b[39m       expect(sendSuccess)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 37 |\u001b[39m         res\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m         \u001b[35m200\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m         \u001b[32m'Cliente suspendido correctamente'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveBeenCalledWith (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/unit/services/clientes/estadoClienteService.unit.test.js\u001b[39m\u001b[0m\u001b[2m:36:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 estadoClienteController (unitario) › 🔸 reactivar › debería reactivar al cliente correctamente\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Cliente reactivado correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 81 |\u001b[39m       \u001b[36mawait\u001b[39m estadoClienteController\u001b[33m.\u001b[39mreactivar(mockReq(idValido)\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 82 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 83 |\u001b[39m       expect(sendSuccess)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 84 |\u001b[39m         res\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m         \u001b[35m200\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m         \u001b[32m'Cliente reactivado correctamente'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveBeenCalledWith (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/unit/services/clientes/estadoClienteService.unit.test.js\u001b[39m\u001b[0m\u001b[2m:83:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 estadoClienteController (unitario) › 🔸 confirmarBaja › debería dar de baja al cliente correctamente\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m{}\u001b[39m, \u001b[32m200\u001b[39m, \u001b[32m\"Baja definitiva confirmada correctamente\"\u001b[39m, \u001b[32m{\"cliente\": {\"_id\": \"685dfd42f11139db51bc2998\", \"calificacion\": \"bueno\", \"estado\": \"activo\", \"isActivo\": true, \"nombre\": \"Cliente Uno\"}}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 115 |\u001b[39m       \u001b[36mawait\u001b[39m estadoClienteController\u001b[33m.\u001b[39mconfirmarBaja(mockReq(idValido)\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 116 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 117 |\u001b[39m       expect(sendSuccess)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 118 |\u001b[39m         res\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 119 |\u001b[39m         \u001b[35m200\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 120 |\u001b[39m         \u001b[32m'Baja definitiva confirmada correctamente'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveBeenCalledWith (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/unit/services/clientes/estadoClienteService.unit.test.js\u001b[39m\u001b[0m\u001b[2m:117:27)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\clientes\\estadoClienteService.unit.test.js","startTime":1750990146144,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["🛣️ Test de rutas /api/clientes"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"🛣️ Test de rutas /api/clientes 🔐 Debe rechazar acceso a POST /api/clientes sin token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"🔐 Debe rechazar acceso a POST /api/clientes sin token"},{"ancestorTitles":["🛣️ Test de rutas /api/clientes"],"duration":40,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m\n    at Object.toBeDefined (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.routes.test.js:40:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🛣️ Test de rutas /api/clientes ✅ Debe permitir acceso a POST /api/clientes con token válido","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"✅ Debe permitir acceso a POST /api/clientes con token válido"},{"ancestorTitles":["🛣️ Test de rutas /api/clientes"],"duration":23,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m\n    at Object.toBeDefined (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.routes.test.js:58:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🛣️ Test de rutas /api/clientes ✅ Crear cliente","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"✅ Crear cliente"},{"ancestorTitles":["🛣️ Test de rutas /api/clientes"],"duration":21,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading '_id')\n    at Object._id (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.routes.test.js:73:47)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🛣️ Test de rutas /api/clientes 🚫 Debe rechazar PATCH /api/clientes/:id/baja-definitiva a administrador","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🚫 Debe rechazar PATCH /api/clientes/:id/baja-definitiva a administrador"}],"endTime":1750990146703,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🛣️ Test de rutas /api/clientes › ✅ Debe permitir acceso a POST /api/clientes con token válido\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 38 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 40 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mcliente)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 43 |\u001b[39m   test(\u001b[32m'✅ Crear cliente'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBeDefined (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.routes.test.js\u001b[39m\u001b[0m\u001b[2m:40:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🛣️ Test de rutas /api/clientes › ✅ Crear cliente\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 56 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 58 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mcliente)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 59 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 60 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 61 |\u001b[39m   test(\u001b[32m'🚫 Debe rechazar PATCH /api/clientes/:id/baja-definitiva a administrador'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBeDefined (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.routes.test.js\u001b[39m\u001b[0m\u001b[2m:58:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🛣️ Test de rutas /api/clientes › 🚫 Debe rechazar PATCH /api/clientes/:id/baja-definitiva a administrador\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading '_id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 71 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 73 |\u001b[39m     \u001b[36mconst\u001b[39m clienteId \u001b[33m=\u001b[39m clienteRes\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mcliente\u001b[33m.\u001b[39m_id\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 74 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 75 |\u001b[39m     \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[22m\n\u001b[2m     \u001b[90m 76 |\u001b[39m       \u001b[33m.\u001b[39mpatch(\u001b[32m`/api/clientes/${clienteId}/baja-definitiva`\u001b[39m)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object._id (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.routes.test.js\u001b[39m\u001b[0m\u001b[2m:73:47)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.routes.test.js","startTime":1750990144413,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["🧪 Integración: Calificación de cliente"],"duration":41,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.toBe (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificacionCliente.int.test.js:71:24)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 Integración: Calificación de cliente 🔸 debería calificar como \"muy_bueno\" si tiene 5 órdenes reparadas","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🔸 debería calificar como \"muy_bueno\" si tiene 5 órdenes reparadas"},{"ancestorTitles":["🧪 Integración: Calificación de cliente"],"duration":106,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.toBe (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificacionCliente.int.test.js:130:24)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 Integración: Calificación de cliente 🔸 debería ignorar órdenes \"irreparable\" al calcular calificación","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🔸 debería ignorar órdenes \"irreparable\" al calcular calificación"}],"endTime":1750990146719,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Integración: Calificación de cliente › 🔸 debería calificar como \"muy_bueno\" si tiene 5 órdenes reparadas\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 69 |\u001b[39m     console\u001b[33m.\u001b[39mlog(\u001b[32m'🧾 Response:'\u001b[39m\u001b[33m,\u001b[39m res\u001b[33m.\u001b[39mbody)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 70 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 71 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mcliente\u001b[33m.\u001b[39mcalificacion)\u001b[33m.\u001b[39mtoBe(\u001b[32m'muy_bueno'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 74 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mcliente\u001b[33m.\u001b[39mestado)\u001b[33m.\u001b[39mtoBe(\u001b[32m'activo'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/calificacionCliente.int.test.js\u001b[39m\u001b[0m\u001b[2m:71:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 Integración: Calificación de cliente › 🔸 debería ignorar órdenes \"irreparable\" al calcular calificación\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 128 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 129 |\u001b[39m     \u001b[90m// 5. Verificar que solo las reparadas se hayan contado y se haya calificado como 'muy_bueno'\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 130 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 131 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 132 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mcliente\u001b[33m.\u001b[39mcalificacion)\u001b[33m.\u001b[39mtoBe(\u001b[32m'regular'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 133 |\u001b[39m     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mcliente\u001b[33m.\u001b[39mestado)\u001b[33m.\u001b[39mtoBe(\u001b[32m'activo'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/calificacionCliente.int.test.js\u001b[39m\u001b[0m\u001b[2m:130:24)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\calificacionCliente.int.test.js","startTime":1750990144410,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Modelo CodigoAcceso - Validaciones"],"duration":37,"failureDetails":[],"failureMessages":[],"fullName":"Modelo CodigoAcceso - Validaciones debería fallar si el código no es único","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería fallar si el código no es único"},{"ancestorTitles":["Modelo CodigoAcceso - Validaciones"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Modelo CodigoAcceso - Validaciones debería fallar si el código no tiene el formato adecuado","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería fallar si el código no tiene el formato adecuado"},{"ancestorTitles":["Modelo CodigoAcceso - Validaciones"],"duration":5,"failureDetails":[{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"__v\": 0, \"_id\": \"685dfd429b9b3b5b9943cbff\", \"codigo\": \"RWN7BNS8\", \"creadoPor\": \"685dfd429b9b3b5b9943cbfe\", \"estado\": \"activo\", \"fechaCreacion\": 2025-06-27T02:09:06.690Z, \"usosDisponibles\": 0}\u001b[39m"}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"__v\": 0, \"_id\": \"685dfd429b9b3b5b9943cbff\", \"codigo\": \"RWN7BNS8\", \"creadoPor\": \"685dfd429b9b3b5b9943cbfe\", \"estado\": \"activo\", \"fechaCreacion\": 2025-06-27T02:09:06.690Z, \"usosDisponibles\": 0}\u001b[39m\n    at expect (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\expect\\build\\index.js:113:15)\n    at Object.expect (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\models\\codigoAcceso.test.js:62:11)\n    at Promise.then.completed (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"Modelo CodigoAcceso - Validaciones debería fallar si los usosDisponibles son menores que 1","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"debería fallar si los usosDisponibles son menores que 1"},{"ancestorTitles":["Modelo CodigoAcceso - Validaciones"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Modelo CodigoAcceso - Validaciones debería fallar si el estado no es válido","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería fallar si el estado no es válido"},{"ancestorTitles":["Modelo CodigoAcceso - Validaciones"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Modelo CodigoAcceso - Validaciones debería guardar un código válido","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"debería guardar un código válido"}],"endTime":1750990146727,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mModelo CodigoAcceso - Validaciones › debería fallar si los usosDisponibles son menores que 1\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise resolved instead of rejected\n    Resolved to value: \u001b[31m{\"__v\": 0, \"_id\": \"685dfd429b9b3b5b9943cbff\", \"codigo\": \"RWN7BNS8\", \"creadoPor\": \"685dfd429b9b3b5b9943cbfe\", \"estado\": \"activo\", \"fechaCreacion\": 2025-06-27T02:09:06.690Z, \"usosDisponibles\": 0}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 60 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 61 |\u001b[39m     \u001b[90m// La validación debería fallar por el mínimo de usos\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 62 |\u001b[39m     \u001b[36mawait\u001b[39m expect(codigo\u001b[33m.\u001b[39msave())\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'El número mínimo de usos debe ser 1'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 63 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 64 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 65 |\u001b[39m   it(\u001b[32m'debería fallar si el estado no es válido'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2mnode_modules/expect/build/index.js\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.expect (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/models/codigoAcceso.test.js\u001b[39m\u001b[0m\u001b[2m:62:11)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\models\\codigoAcceso.test.js","startTime":1750990146446,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) debería lanzar error si el cliente tiene OS no finalizadas","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"debería lanzar error si el cliente tiene OS no finalizadas"},{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) ✅ Actualiza cliente correctamente (sin DNI)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ Actualiza cliente correctamente (sin DNI)"},{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) ❌ Lanza error si cliente no existe","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si cliente no existe"},{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) ❌ Lanza error si se intenta cambiar el DNI","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si se intenta cambiar el DNI"},{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) ❌ Lanza error si estado es \"suspendido\"","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si estado es \"suspendido\""},{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) ❌ Lanza error si calificación es \"muy_malo\"","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si calificación es \"muy_malo\""},{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) ❌ Lanza error si el email ya existe en otro cliente","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si el email ya existe en otro cliente"},{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) ❌ Lanza error si el teléfono ya existe en otro cliente","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si el teléfono ya existe en otro cliente"},{"ancestorTitles":["🧪 editarClienteService (unitario)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 editarClienteService (unitario) ❌ Lanza error si cliente no se encuentra al actualizar","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si cliente no se encuentra al actualizar"}],"endTime":1750990147189,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\clientes\\editarClienteService.unit.test.js","startTime":1750990146577,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["crearEquipoService"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService ✅ Usa ficha técnica existente e ignora fichaTecnicaManual","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ Usa ficha técnica existente e ignora fichaTecnicaManual"},{"ancestorTitles":["crearEquipoService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService ✅ Crea ficha técnica manual si no existe ninguna","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ Crea ficha técnica manual si no existe ninguna"},{"ancestorTitles":["crearEquipoService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService ❌ No crea ficha técnica si no hay existente ni fichaTecnicaManual","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ No crea ficha técnica si no hay existente ni fichaTecnicaManual"},{"ancestorTitles":["crearEquipoService"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService ❌ Lanza error si ya existe un equipo con el mismo número de serie","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si ya existe un equipo con el mismo número de serie"},{"ancestorTitles":["crearEquipoService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService ❌ Lanza error si falta tipo, modelo o clienteActual","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Lanza error si falta tipo, modelo o clienteActual"},{"ancestorTitles":["crearEquipoService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService ✅ Crea equipo con ficha técnica existente + campos sobrescritos (repotenciado)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ Crea equipo con ficha técnica existente + campos sobrescritos (repotenciado)"},{"ancestorTitles":["crearEquipoService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService ✅ Valida que la fuente se setee correctamente para cada campo","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ Valida que la fuente se setee correctamente para cada campo"},{"ancestorTitles":["crearEquipoService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService ✅ Crea equipo aunque no haya ficha técnica ni fichaTecnicaManual","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"✅ Crea equipo aunque no haya ficha técnica ni fichaTecnicaManual"}],"endTime":1750990147207,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\equipos\\fichaTecnicaService.test.js","startTime":1750990146763,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["🧪 crearClienteService"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteService ✅ Crea cliente exitosamente con datos válidos","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ Crea cliente exitosamente con datos válidos"},{"ancestorTitles":["🧪 crearClienteService"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteService ❌ Rechaza creación con estado suspendido","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Rechaza creación con estado suspendido"},{"ancestorTitles":["🧪 crearClienteService"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteService ❌ Rechaza creación con estado baneado","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Rechaza creación con estado baneado"},{"ancestorTitles":["🧪 crearClienteService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteService ❌ Rechaza creación con calificación muy_malo","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Rechaza creación con calificación muy_malo"},{"ancestorTitles":["🧪 crearClienteService"],"duration":22,"failureDetails":[],"failureMessages":[],"fullName":"🧪 crearClienteService ❌ Rechaza creación con calificación malo","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Rechaza creación con calificación malo"}],"endTime":1750990147312,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\clientes\\crearClienteServices.test.js","startTime":1750990146748,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["🧪 CRUD de Clientes"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: logger.initLogger is not a function\n    at Object.initLogger (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.int.test.js:23:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 CRUD de Clientes ✅ Crear cliente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"✅ Crear cliente"},{"ancestorTitles":["🧪 CRUD de Clientes"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: logger.initLogger is not a function\n    at Object.initLogger (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.int.test.js:23:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 CRUD de Clientes ✏️ Editar cliente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"✏️ Editar cliente"},{"ancestorTitles":["🧪 CRUD de Clientes"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: logger.initLogger is not a function\n    at Object.initLogger (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.int.test.js:23:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 CRUD de Clientes 🚫 Suspender cliente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🚫 Suspender cliente"},{"ancestorTitles":["🧪 CRUD de Clientes"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: logger.initLogger is not a function\n    at Object.initLogger (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.int.test.js:23:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 CRUD de Clientes 🔁 Reactivar cliente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🔁 Reactivar cliente"},{"ancestorTitles":["🧪 CRUD de Clientes"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: logger.initLogger is not a function\n    at Object.initLogger (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.int.test.js:23:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 CRUD de Clientes ⛔️ Confirmar baja definitiva","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"⛔️ Confirmar baja definitiva"},{"ancestorTitles":["🧪 CRUD de Clientes"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: logger.initLogger is not a function\n    at Object.initLogger (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.int.test.js:23:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 CRUD de Clientes 🧠 Calificar cliente","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"🧠 Calificar cliente"},{"ancestorTitles":["🧪 CRUD de Clientes"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: logger.initLogger is not a function\n    at Object.initLogger (C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.int.test.js:23:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"🧪 CRUD de Clientes 📄 Obtener todos los clientes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"📄 Obtener todos los clientes"}],"coverage":{},"endTime":1750990149215,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 CRUD de Clientes › ✅ Crear cliente\u001b[39m\u001b[22m\n\n    TypeError: logger.initLogger is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 21 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   cookieAdmin \u001b[33m=\u001b[39m cookie\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 23 |\u001b[39m   logger\u001b[33m.\u001b[39minitLogger(__filename)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.initLogger (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.int.test.js\u001b[39m\u001b[0m\u001b[2m:23:10)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 CRUD de Clientes › ✏️ Editar cliente\u001b[39m\u001b[22m\n\n    TypeError: logger.initLogger is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 21 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   cookieAdmin \u001b[33m=\u001b[39m cookie\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 23 |\u001b[39m   logger\u001b[33m.\u001b[39minitLogger(__filename)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.initLogger (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.int.test.js\u001b[39m\u001b[0m\u001b[2m:23:10)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 CRUD de Clientes › 🚫 Suspender cliente\u001b[39m\u001b[22m\n\n    TypeError: logger.initLogger is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 21 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   cookieAdmin \u001b[33m=\u001b[39m cookie\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 23 |\u001b[39m   logger\u001b[33m.\u001b[39minitLogger(__filename)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.initLogger (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.int.test.js\u001b[39m\u001b[0m\u001b[2m:23:10)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 CRUD de Clientes › 🔁 Reactivar cliente\u001b[39m\u001b[22m\n\n    TypeError: logger.initLogger is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 21 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   cookieAdmin \u001b[33m=\u001b[39m cookie\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 23 |\u001b[39m   logger\u001b[33m.\u001b[39minitLogger(__filename)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.initLogger (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.int.test.js\u001b[39m\u001b[0m\u001b[2m:23:10)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 CRUD de Clientes › ⛔️ Confirmar baja definitiva\u001b[39m\u001b[22m\n\n    TypeError: logger.initLogger is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 21 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   cookieAdmin \u001b[33m=\u001b[39m cookie\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 23 |\u001b[39m   logger\u001b[33m.\u001b[39minitLogger(__filename)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.initLogger (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.int.test.js\u001b[39m\u001b[0m\u001b[2m:23:10)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 CRUD de Clientes › 🧠 Calificar cliente\u001b[39m\u001b[22m\n\n    TypeError: logger.initLogger is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 21 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   cookieAdmin \u001b[33m=\u001b[39m cookie\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 23 |\u001b[39m   logger\u001b[33m.\u001b[39minitLogger(__filename)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.initLogger (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.int.test.js\u001b[39m\u001b[0m\u001b[2m:23:10)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m🧪 CRUD de Clientes › 📄 Obtener todos los clientes\u001b[39m\u001b[22m\n\n    TypeError: logger.initLogger is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 21 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   cookieAdmin \u001b[33m=\u001b[39m cookie\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 23 |\u001b[39m   logger\u001b[33m.\u001b[39minitLogger(__filename)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.initLogger (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/integration/clientes.int.test.js\u001b[39m\u001b[0m\u001b[2m:23:10)\u001b[22m\u001b[2m\u001b[22m\n\n\n  \u001b[1m● \u001b[22mTest suite failed to run\n\n    TypeError: logger.closeLogger is not a function\n\n    \u001b[0m \u001b[90m 31 |\u001b[39m     console\u001b[33m.\u001b[39merror(\u001b[32m'❌ Error en afterAll:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m   }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 33 |\u001b[39m   logger\u001b[33m.\u001b[39mcloseLogger()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 35 |\u001b[39m\n     \u001b[90m 36 |\u001b[39m describe(\u001b[32m'🧪 CRUD de Clientes'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      \u001b[2mat Object.closeLogger (\u001b[22m\u001b[0m\u001b[36m__tests__/integration/clientes.int.test.js\u001b[39m\u001b[0m\u001b[2m:33:10)\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\integration\\clientes.int.test.js","startTime":1750990149215,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["crearEquipoService"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService debe crear un equipo correctamente con ficha técnica y historial","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"debe crear un equipo correctamente con ficha técnica y historial"},{"ancestorTitles":["crearEquipoService"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService debe lanzar error si falta tipo, modelo o clienteActual","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debe lanzar error si falta tipo, modelo o clienteActual"},{"ancestorTitles":["crearEquipoService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoService debe lanzar error si el nroSerie ya existe","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debe lanzar error si el nroSerie ya existe"}],"endTime":1750990147443,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\equipos\\crearEquipoService.test.js","startTime":1750990146733,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["🧪 calificarClienteController - Unit Test"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"🧪 calificarClienteController - Unit Test ✅ Responde con 200 y datos del cliente si todo va bien","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"✅ Responde con 200 y datos del cliente si todo va bien"},{"ancestorTitles":["🧪 calificarClienteController - Unit Test"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"🧪 calificarClienteController - Unit Test 🚫 Devuelve 404 si el cliente no existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"🚫 Devuelve 404 si el cliente no existe"},{"ancestorTitles":["🧪 calificarClienteController - Unit Test"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"🧪 calificarClienteController - Unit Test 🔥 Devuelve 500 si ocurre un error inesperado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"🔥 Devuelve 500 si ocurre un error inesperado"}],"endTime":1750990147574,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\clientes\\calificarClienteController.test.js","startTime":1750990147213,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["obtenerClientesController"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesController ✅ responde sin filtros","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ responde sin filtros"},{"ancestorTitles":["obtenerClientesController"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesController 🔍 responde filtrando por nombre","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"🔍 responde filtrando por nombre"},{"ancestorTitles":["obtenerClientesController"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesController 🔍 responde filtrando por estado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"🔍 responde filtrando por estado"},{"ancestorTitles":["obtenerClientesController"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesController 🔍 responde filtrando por estado y calificación","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"🔍 responde filtrando por estado y calificación"},{"ancestorTitles":["obtenerClientesController"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesController 🔍 responde con paginación y ordenamiento","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"🔍 responde con paginación y ordenamiento"},{"ancestorTitles":["obtenerClientesController"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesController ❌ responde con error si falla el servicio","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ responde con error si falla el servicio"}],"endTime":1750990147594,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\clientes\\obtenerClientesController.test.js","startTime":1750990147221,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["crearEquipoController"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoController debe responder 201 cuando el equipo se crea correctamente","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"debe responder 201 cuando el equipo se crea correctamente"},{"ancestorTitles":["crearEquipoController"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"crearEquipoController debe responder 400 cuando el servicio lanza un error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"debe responder 400 cuando el servicio lanza un error"}],"endTime":1750990147775,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\equipos\\crearEquiposController.test.js","startTime":1750990147321,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["obtenerClientesBase","🔍 Buscar por ID"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesBase 🔍 Buscar por ID ✅ devuelve cliente si ID es válido","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ devuelve cliente si ID es válido"},{"ancestorTitles":["obtenerClientesBase","🔍 Buscar por ID"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesBase 🔍 Buscar por ID ❌ lanza error si ID es inválido","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ lanza error si ID es inválido"},{"ancestorTitles":["obtenerClientesBase","🔍 Buscar por ID"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesBase 🔍 Buscar por ID ❌ lanza error si cliente no existe","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ lanza error si cliente no existe"},{"ancestorTitles":["obtenerClientesBase","📋 Buscar múltiples clientes"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesBase 📋 Buscar múltiples clientes ✅ devuelve lista de clientes y total con filtros","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"✅ devuelve lista de clientes y total con filtros"},{"ancestorTitles":["obtenerClientesBase","📋 Buscar múltiples clientes"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientesBase 📋 Buscar múltiples clientes ✅ aplica paginación y ordenamiento correctamente","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"✅ aplica paginación y ordenamiento correctamente"}],"endTime":1750990147834,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\services\\clientes\\obtenerClientesService.test.js","startTime":1750990147582,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Modelo Cliente"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Modelo Cliente debería crear un cliente válido","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"debería crear un cliente válido"},{"ancestorTitles":["Modelo Cliente"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Modelo Cliente debería rechazar clientes con DNI duplicado","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería rechazar clientes con DNI duplicado"},{"ancestorTitles":["Modelo Cliente"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Modelo Cliente debería rechazar un estado inválido","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería rechazar un estado inválido"},{"ancestorTitles":["Modelo Cliente"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Modelo Cliente debería aceptar observaciones personalizadas","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería aceptar observaciones personalizadas"}],"endTime":1750990147851,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\models\\cliente.test.js","startTime":1750990147452,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Modelo Cliente - Validaciones"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"Modelo Cliente - Validaciones debería guardar un cliente válido con calificación por defecto","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"debería guardar un cliente válido con calificación por defecto"},{"ancestorTitles":["Modelo Cliente - Validaciones"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Modelo Cliente - Validaciones debería fallar con una calificación inválida","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería fallar con una calificación inválida"},{"ancestorTitles":["Modelo Cliente - Validaciones"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Modelo Cliente - Validaciones debería permitir guardar con calificación \"bueno\"","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debería permitir guardar con calificación \"bueno\""}],"endTime":1750990147867,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\models\\clienteModel.test.js","startTime":1750990147607,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["obtenerClientePorIdController"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientePorIdController ✅ responde con cliente encontrado","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"✅ responde con cliente encontrado"},{"ancestorTitles":["obtenerClientePorIdController"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientePorIdController ❌ responde con error si ID es inválido","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"❌ responde con error si ID es inválido"},{"ancestorTitles":["obtenerClientePorIdController"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientePorIdController ❌ responde con error si cliente no existe","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ responde con error si cliente no existe"},{"ancestorTitles":["obtenerClientePorIdController"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"obtenerClientePorIdController ❌ responde con error 500 si ocurre un error inesperado","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ responde con error 500 si ocurre un error inesperado"}],"endTime":1750990147883,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\clientes\\obtenerClientePorIdController.test.js","startTime":1750990147422,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧪 Sanity test: la conexión a MongoDB funciona","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"🧪 Sanity test: la conexión a MongoDB funciona"}],"endTime":1750990148006,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\sanity.test.js","startTime":1750990147786,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750990149215,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Cannot find module '../../models/CodigoAcceso' from '__tests__/unit/controllers/codigoController.test.js'\n\n    \u001b[0m \u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m { logError } \u001b[33m=\u001b[39m require(\u001b[32m'../../../utils/logger'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 10 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../models/CodigoAcceso'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../utils/logger'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mconst\u001b[39m mockSave \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m\u001b[0m\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22mnode_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36m__tests__/unit/controllers/codigoController.test.js\u001b[39m\u001b[0m\u001b[2m:10:39)\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\codigoController.test.js","startTime":1750990149215,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750990149215,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    \u001b[31m\u001b[1mConfiguration error\u001b[22m:\u001b[39m\n    \u001b[31m\u001b[39m\n    \u001b[31mCould not locate module \u001b[1m@services/clientes/obtenerClientePorIdService\u001b[22m mapped as:\u001b[39m\n    \u001b[31m\u001b[1mC:\\Users\\DELL\\serviciotecnico-v29\\backend\\services$1\u001b[22m.\u001b[39m\n    \u001b[31m\u001b[39m\n    \u001b[31mPlease check your configuration for these entries:\u001b[39m\n    \u001b[31m{\u001b[39m\n    \u001b[31m  \"moduleNameMapper\": {\u001b[39m\n    \u001b[31m    \"/^@services(.*)$/\": \"\u001b[1mC:\\Users\\DELL\\serviciotecnico-v29\\backend\\services$1\u001b[22m\"\u001b[39m\n    \u001b[31m  },\u001b[39m\n    \u001b[31m  \"resolver\": \u001b[1mundefined\u001b[22m\u001b[39m\n    \u001b[31m}\u001b[39m\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m eliminarClienteController \u001b[33m=\u001b[39m require(\u001b[32m'@controllers/clientes/eliminacion/eliminarClienteController'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@services/clientes/obtenerClientePorIdService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@services/clientes/obtenerClientesService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@services/clientes/crearClienteService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@services/clientes/editarClienteService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat createNoMappedModuleFoundError (\u001b[22mnode_modules/jest-resolve/build/resolver.js\u001b[2m:759:17)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36m__tests__/unit/controllers/clientes/clientesController.test.js\u001b[39m\u001b[0m\u001b[2m:11:59)\u001b[22m\n","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\controllers\\clientes\\clientesController.test.js","startTime":1750990149215,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ retorna regular si no hay órdenes relevantes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ retorna regular si no hay órdenes relevantes"},{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ retorna regular si solo hay una negativa","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ retorna regular si solo hay una negativa"},{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ retorna regular si hay 2 malas","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ retorna regular si hay 2 malas"},{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ retorna bueno con 3 de 4 buenas","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ retorna bueno con 3 de 4 buenas"},{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ retorna muy_bueno si 9 de 10 son buenas","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ retorna muy_bueno si 9 de 10 son buenas"},{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ retorna muy_malo si 5 de 5 son malas","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ retorna muy_malo si 5 de 5 son malas"},{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ ignora órdenes irreparables","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ ignora órdenes irreparables"},{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ retorna malo si 2 de 5 son buenas (40%)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ retorna malo si 2 de 5 son buenas (40%)"},{"ancestorTitles":["🧠 calcularCalificacionBase"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"🧠 calcularCalificacionBase ✅ retorna regular si no califica para ningún otro caso","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"✅ retorna regular si no califica para ningún otro caso"}],"endTime":1750990148051,"message":"","name":"C:\\Users\\DELL\\serviciotecnico-v29\\backend\\__tests__\\unit\\utils\\calculaCalificacionBase.unit.test.js","startTime":1750990147847,"status":"passed","summary":""}],"wasInterrupted":false}
